#define _CRT_SECURE_NO_WARNINGS
#include <iostream>
#include <algorithm>
#include <cstdio>
#include <string>
#include <vector>
#define MAX 501
#define swap(a,b) {char temp = a; a = b; b = temp;}
typedef unsigned long long ull;
using namespace std;
int dp[MAX + 2][MAX + 2];
int arr[MAX + 2];

int main() {
	int n;
	cin >> n;
	for (int i = 1; i <= n; i++) scanf("%d", &arr[i]);
	arr[0] = arr[n + 1] = 1;
	for (int k = 2; k <= n + 1; k++) {
		for (int left = 0; left + k <= n + 1; left++) {
			int right = left + k;
			for (int i = left + 1; i < right; i++) {
				dp[left][right] = max(dp[left][right], arr[left] * arr[i] * arr[right] + dp[left][i] + dp[i][right]);
			}
		}
	}
	cout << dp[0][n + 1] << endl;
}