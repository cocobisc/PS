#include <iostream>
#include <algorithm>
#include <string>
#include <vector>
#define MAX 501
#define swap(a,b) {char temp = a; a = b; b = temp;}
typedef unsigned long long ull;
using namespace std;
int n, maxx;

void findmax(int *b, int *visited, int start, int result) {
	if (start == n - 1)
		if (maxx < result) maxx = result;
		
	for (int i = 1; i < n - 1; i++) {
		if (!visited[i]) {
			int bef = i - 1, aft = i + 1;
			while (visited[bef]) bef--;
			while (visited[aft]) aft++;
			int temp = b[bef] * b[i] * b[aft];

			result += temp;
			visited[i] = 1;
			findmax(b, visited, start + 1, result);
			result -= temp;
			visited[i] = 0;
		}
	}
}
int main() {
	int b[MAX];
	int visited[MAX];
	memset(visited, 0, sizeof(visited));
	cin >> n;
	for (int i = 0; i < n; i++) cin >> b[i];
	findmax(b, visited, 1, 0);
	int left = b[0] * b[n - 1];
	if (b[0] > b[n - 1]) maxx += left + b[0];
	else maxx += left + b[n - 1];
	cout << maxx << endl;
}